<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Dashboard Forecast Wisatawan</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
  body {
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #eef2f3, #dfe9f3);
    margin: 0;
    padding: 0;
    color: #333;
  }

  header {
    background: #3f51b5;
    color: #fff;
    padding: 30px 20px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    border-bottom-left-radius: 20px;
    border-bottom-right-radius: 20px;
  }

  h1 {
    font-size: 28px;
    margin-bottom: 8px;
    letter-spacing: 1px;
  }

  h2 {
    font-size: 18px;
    font-weight: 400;
    opacity: 0.9;
  }

  /* Biar semua grafik berjajar ke bawah */
  .grid {
    display: flex;
    flex-direction: column;
    gap: 25px;
    padding: 30px;
    max-width: 900px;
    margin: auto;
  }

  .chart-container {
    background: #fff;
    padding: 20px 25px;
    border-radius: 20px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .chart-container:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 25px rgba(0,0,0,0.15);
  }

  h3 {
    margin-bottom: 15px;
    font-size: 19px;
    font-weight: 600;
    color: #444;
    border-left: 5px solid #3f51b5;
    padding-left: 10px;
  }

  canvas {
    width: 100% !important;
    height: 350px !important;
  }

  /* Tambahan footer */
  footer {
    text-align: center;
    padding: 15px;
    background: #3f51b5;
    color: white;
    margin-top: 30px;
    font-size: 14px;
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
  }
</style>
</head>
<body>
  <header>
    <h1>ðŸ“Š Dashboard Forecast Wisatawan</h1>
    <h2>Data: 2019 - 2025</h2>
  </header>

  <div class="grid">
    <!-- Grafik 1 -->
    <div class="chart-container">
      <h3>Forecast Total Kunjungan Tahun 2025</h3>
      <canvas id="chartPerbulan"></canvas>
    </div>

    <!-- Grafik 2 -->
    <div class="chart-container">
      <h3>Forecast Kunjungan per Kategori (2025)</h3>
      <canvas id="chartKategori"></canvas>
    </div>

    <!-- Grafik 3 -->
    <div class="chart-container">
      <h3>Total Kunjungan per Tahun (2019â€“2025)</h3>
      <canvas id="chartTahunan"></canvas>
    </div>

    <!-- Grafik 4 -->
    <div class="chart-container">
      <h3>Perbandingan Udara, Laut, Darat (2025)</h3>
      <canvas id="chartPie"></canvas>
    </div>
  </div>

  <script>
  // Fungsi untuk baca CSV lokal
  async function loadCSV(path) {
    const response = await fetch(path);
    const data = await response.text();
    return data.split("\n").map(r => r.split(","));
  }

  // Grafik 1: Forecast per bulan
  loadCSV("data/forecast_perbulan_2025.csv").then(rows => {
    const labels = ["Januari","Februari","Maret","April","Mei","Juni",
                    "Juli","Agustus","September","Oktober","November","Desember"];
    const data = rows.slice(1).map(r => parseFloat(r[4]) || 0);
    new Chart(document.getElementById("chartPerbulan"), {
      type: "bar",
      data: {
        labels: labels,
        datasets: [{
          label: "Jumlah Kunjungan",
          data: data,
          backgroundColor: "rgba(54,162,235,0.7)"
        }]
      }
    });
  });

  // Grafik 2 & 4: Forecast per kategori + Pie
  loadCSV("data/forecast_sarima_2025.csv").then(rows => {
    const labels = rows.slice(1).map(r => r[0]); // bulan
    const laut  = rows.slice(1).map(r => parseFloat(r[2]) || 0); // kolom C
    const udara = rows.slice(1).map(r => parseFloat(r[3]) || 0); // kolom D
    const total = rows.slice(1).map(r => parseFloat(r[5]) || 0); // kolom F

    // hitung darat = total - (laut + udara)
    const darat = total.map((t,i) => t - (laut[i] + udara[i]));

    // === Grafik 2 ===
    new Chart(document.getElementById("chartKategori"), {
      type: "line",
      data: {
        labels: labels,
        datasets: [
          { label: "Udara", data: udara, borderColor: "blue", fill: false },
          { label: "Laut",  data: laut,  borderColor: "green", fill: false },
          { label: "Darat", data: darat, borderColor: "orange", fill: false }
        ]
      }
    });

    // === Grafik 4 ===
    const totalLaut  = laut.reduce((a,b) => a + b, 0);
    const totalUdara = udara.reduce((a,b) => a + b, 0);
    const totalDarat = darat.reduce((a,b) => a + b, 0);

    new Chart(document.getElementById("chartPie"), {
      type: "pie",
      data: {
        labels: ["Udara", "Laut", "Darat"],
        datasets: [{
          data: [totalUdara, totalLaut, totalDarat],
          backgroundColor: ["blue","green","orange"]
        }]
      }
    });
  });

  // Grafik 3: Trend tahunan
  loadCSV("data/jumlah_kunjungan_per_tahun_2019_2025.csv").then(rows => {
    const labels = rows.slice(1).map(r => r[0]); 
    const data = rows.slice(1).map(r => parseFloat(r[1]) || 0);
    new Chart(document.getElementById("chartTahunan"), {
      type: "bar",
      data: {
        labels: labels,
        datasets: [{
          label: "Jumlah Kunjungan",
          data: data,
          backgroundColor: "rgba(255,99,132,0.7)"
        }]
      }
    });
  });
  </script>
</body>
</html>